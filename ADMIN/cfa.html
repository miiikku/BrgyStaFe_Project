<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Completed Lupon and Kasunduan</title>
    <link href="https://fonts.googleapis.com/css2?family=Arial:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="public/styles/styles.css">
</head>
<style>
     /* Adjust the size and scrollable area for textarea */
     .floating-label textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 16px;
            resize: vertical;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .modal-content {
            max-width: 600px;
            width: 100%;
        }
</style>
<body>
    <div class="sidebar">
        <center>
            <img src="https://www.dropbox.com/scl/fi/hplpyx3p3gjc3ozhxa7w6/Dasmarinas-removebg-preview.png?rlkey=bw11d1gi5odcv59ingug5pjeh&st=tl9dj1dk&dl=1" class="Logo">
            <h1>BARANGAY SANTA FE<br>CITY OF DASMARIÃ‘AS</h1>
        </center>
        <div class="sidenav">
            <ul>
                <li><a href="dashboard.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/es7o8fr6dw2vkkywjpg66/dashboard.png?rlkey=pp0dy252j9wao81jpz1n50f4p&st=83lbnbnz&dl=1" class="sidebar-icon">Dashboard</a></li>
                <li><a href="notification.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/te9qkrjtunarm8znvfs1w/notification.png?rlkey=kqzy50yimgtro1l8caiqnqbua&st=4zuvr1p0&dl=1" class="sidebar-icon">Notification</a></li>
                <li><a href="user-account.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/tnounxbo8vd5763gnoysp/userAccount.png?rlkey=hyos7zrh4ghwr66mjivsqfd5b&st=4ko3y2wy&dl=1" class="sidebar-icon">User Account</a></li>
                <li><a href="residents.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/e57yqafcdt0z58wbgvv9e/residents.png?rlkey=wcqigcrhwveax3qubldx0qaql&st=np6th3hf&dl=1" class="sidebar-icon">Residents</a></li>
                <li><a href="complaints.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/kbs0xnrc9usw40lv30clw/scales-of-justice.png?rlkey=d36ewu4dge121egpw53qri8mf&st=r04p7f12&dl=1" class="sidebar-icon">Complaints</a></li>
                <li><a href="barangay-id.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/5bv5aqyto4z9york6lzwq/id-card.png?rlkey=crbfg36zcmb1tq9yfdg0t8zm2&st=ocm8u8fd&dl=1" class="sidebar-icon">Barangay ID</a></li>
                <li><a href="request.html" class="sidebar-link"><img src="https://www.dropbox.com/scl/fi/idqomcr0ujnsmd54ktpu5/quote-request.png?rlkey=swquji94hs61jlr8y0p992s0n&st=vkr8y4i7&dl=1" class="sidebar-icon">Requests</a></li>
            </ul>
        </div>
    </div>
    
    <div class="main-content">
        <div class="header">
            <h2>Certification to File Action</h2>
              <div class="user-info">
                <div class="dropdown">
                    <img src="https://www.dropbox.com/scl/fi/oedqyjb59kspzdylesk6y/user.png?rlkey=1axl685fxswp7olj90dbgu53y&st=7jh50r8n&dl=1" alt="User Avatar" class="dropbtn" onclick="toggleDropdown()">
                    <div id="myDropdown" class="dropdown-content">
                        <a href="admin-details.html" onclick="viewProfile()">User Profile</a>
                        <a href="module.html">Maintenance</a>
                        <a href="#" onclick="logout()">Logout</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="search-and-actions">
            <div class="search-box">
                <input type="text" placeholder="Search..." oninput="searchCFA()">
            </div>
            <div class="filter-box">
                <select onchange="navigateToPage(this)">
                    <option value="cfa.html"selected>Processing</option>
                    <option value="cfa-complete.html">Completed</option>
                </select>
            </div>
            <div class="account-actions">
                <button class="add-btn" onclick="openAddCFA()">Add CFA</button>
            </div>
        </div>

        <!-- Completed CFA Table -->
        <div class="account-content">
            <h3>Certification to File Action</h3>
            <div class="account-table">
                <table>
                    <thead>
                        <tr>
                            <th>Brgy Case No</th>
                            <th>For (Reason)</th>
                            <th>Complainant</th>
                            <th>Complainee</th>
                            <th>Date Issued</th>
                            <th>Pangkat Chairperson</th>
                            <th>Pangkat Member</th>
                            <th>Pangkat Member</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="completed-cfa-table-body">
                        <!-- CFA Rows will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add CFA Modal -->
<div id="addCFAModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddCFAModal()">&times;</span>
      <h2>Add Certification to File Action (CFA)</h2>
      <form id="addCFAForm">
        <div class="form-row">
          <div class="floating-label">
            <input type="text" id="brgyCaseNo" name="brgyCaseNo" readonly placeholder="">
            <label for="brgyCaseNo">Brgy Case No</label>
          </div>
          <div class="floating-label">
            <input type="text" id="reason" name="reason" placeholder=" " required>
            <label for="reason">For (Reason)</label>
          </div>
        </div>
        <!-- Complainant Fields -->
        <div class="form-row">
          <div class="floating-label">
              <input type="text" id="complainantFirstName" name="complainantFirstName" placeholder=" " required>
              <label for="complainantFirstName">Complainant First Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="complainantMiddleName" name="complainantMiddleName" placeholder=" " required>
              <label for="complainantMiddleName">Complainant Middle Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="complainantLastName" name="complainantLastName" placeholder=" " required>
              <label for="complainantLastName">Complainant Last Name</label>
          </div>
      </div>
      
      <!-- Complainee Fields -->
      <div class="form-row">
          <div class="floating-label">
              <input type="text" id="complaineeFirstName" name="complaineeFirstName" placeholder=" " required>
              <label for="complaineeFirstName">Complainee First Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="complaineeMiddleName" name="complaineeMiddleName" placeholder=" " required>
              <label for="complaineeMiddleName">Complainee Middle Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="complaineeLastName" name="complaineeLastName" placeholder=" " required>
              <label for="complaineeLastName">Complainee Last Name</label>
          </div>
      </div>
        <div class="form-row">
          <div class="floating-label">
            <input type="date" id="dateIssued" name="dateIssued" placeholder=" " required>
            <label for="dateIssued">Date Issued</label>
          </div>
        </div>
        <div class="form-row">
            <div class="floating-label">
              <select id="pangkatChairperson" name="pangkatChairperson" required>
                <option value="" disabled selected>Select Pangkat Chairperson</option>
                <!-- Options will be populated dynamically -->
            </select>
            <label for="pangkatChairperson">Pangkat Chairperson</label>
            </div>
            <div class="floating-label">
              <select id="pangkatMember1" name="pangkatMember1" required>
                <option value="" disabled selected>Select Pangkat Member 1</option>
                <!-- Options will be populated dynamically -->
            </select>
            <label for="pangkatMember1">Pangkat Member 1</label>
            </div>
            <div class="floating-label">
              <select id="pangkatMember2" name="pangkatMember2" required>
                <option value="" disabled selected>Select Pangkat Member 2</option>
                <!-- Options will be populated dynamically -->
              </select>
            <label for="pangkatMember2">Pangkat Member 2</label>
            </div>
        </div>
        <div class="floating-label">
          <select id="status" required>
              <option value="Processing" selected>Processing</option>
          </select>
          <label for="status">Status</label>
      </div>
        <div class="button-container">
          <button type="submit" class="add-btn">Add CFA</button>
          <button type="button" class="cancel-btn" onclick="closeAddCFAModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit CFA Modal -->
<div id="editCFAModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditCFAModal()">&times;</span>
      <h2>Edit Certification to File Action (CFA)</h2>
      <form id="editCFAForm">
        <input type="hidden" id="editCFAId" name="id">
        <div class="form-row">
          <div class="floating-label">
            <input type="text" id="editBrgyCaseNo" name="brgyCaseNo" placeholder=" " required>
            <label for="editBrgyCaseNo">Brgy Case No</label>
          </div>
          <div class="floating-label">
            <input type="text" id="editReason" name="reason" placeholder=" " required>
            <label for="editReason">For (Reason)</label>
          </div>
        </div>
        <!-- Complainant Fields -->
        <div class="form-row">
          <div class="floating-label">
              <input type="text" id="editComplainantFirstName" name="complainantFirstName" placeholder=" " required>
              <label for="editComplainantFirstName">Complainant First Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="editComplainantMiddleName" name="complainantMiddleName" placeholder=" " required>
              <label for="editComplainantMiddleName">Complainant Middle Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="editComplainantLastName" name="complainantLastName" placeholder=" " required>
              <label for="editComplainantLastName">Complainant Last Name</label>
          </div>
      </div>
      
      <!-- Complainee Fields -->
      <div class="form-row">
          <div class="floating-label">
              <input type="text" id="editComplaineeFirstName" name="complaineeFirstName" placeholder=" " required>
              <label for="editComplaineeFirstName">Complainee First Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="editComplaineeMiddleName" name="complaineeMiddleName" placeholder=" " required>
              <label for="editComplaineeMiddleName">Complainee Middle Name</label>
          </div>
          <div class="floating-label">
              <input type="text" id="editComplaineeLastName" name="complaineeLastName" placeholder=" " required>
              <label for="editComplaineeLastName">Complainee Last Name</label>
          </div>
      </div>
        <div class="form-row">
          <div class="floating-label">
            <input type="date" id="editDateIssued" name="dateIssued" placeholder=" " required>
            <label for="editDateIssued">Date Issued</label>
          </div>
        </div>
        <div class="form-row">
          <div class="floating-label">
            <select id="editPangkatChairperson" name="pangkatChairperson" required>
              <option value="" disabled>Select Chairperson</option>
              <!-- Options will be dynamically populated -->
          </select>
          <label for="editPangkatChairperson">Pangkat Chairperson</label>
          </div>
          <div class="floating-label">
            <select id="editPangkatMember1" name="pangkatMember1" required>
              <option value="" disabled>Select Member 1</option>
              <!-- Options will be dynamically populated -->
          </select>
          <label for="editPangkatMember1">Pangkat Member 1</label>
          </div>
          <div class="floating-label">
            <select id="editPangkatMember2" name="pangkatMember2" required>
              <option value="" disabled>Select Member 2</option>
              <!-- Options will be dynamically populated -->
          </select>
          <label for="editPangkatMember2">Pangkat Member 2</label>
          </div>
        </div>
        <div class="floating-label">
          <select id="editStatus" required>
            <option value="" disabled selected></option>
            <option value="Processing">Processing</option>
            <option value="Completed">Completed</option>
          </select>
          <label for="editStatus">Status</label>
        </div>
        <div class="button-container">
          <button type="submit" class="add-btn">Save Changes</button>
          <button type="button" class="cancel-btn" onclick="closeEditCFAModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  

        <script src="public/styles/script.js"></script>
        <script>
          //SEARCH
          function searchCFA() {
    // Get the search input value
    const searchValue = document.querySelector('.search-box input').value.toLowerCase();

    // Search Completed CFA Table
    const cfaRows = document.querySelectorAll('#completed-cfa-table-body tr');
    cfaRows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const matches = Array.from(cells).some(cell => 
            cell.textContent.toLowerCase().includes(searchValue)
        );
        if (matches) {
            row.style.display = ''; // Show the row
        } else {
            row.style.display = 'none'; // Hide the row
        }
    });
}

             // DISPLAY THE MONGO DB TABLE
  function fetchCFAData() {
    fetch('/fetch-cfa-data')
      .then(response => response.json())
      .then(data => {
        const tableBody = document.getElementById('completed-cfa-table-body');
        tableBody.innerHTML = ''; // Clear any existing data
        
        data.forEach(entry => {
          const complainantFullName = `${entry.complainantFirstName} ${entry.complainantMiddleName} ${entry.complainantLastName}`.trim();
    const complaineeFullName = `${entry.complaineeFirstName} ${entry.complaineeMiddleName} ${entry.complaineeLastName}`.trim();
    
    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${entry.brgyCaseNo}</td>
        <td>${entry.reason}</td>
        <td>${complainantFullName}</td>
        <td>${complaineeFullName}</td>
        <td>${entry.dateIssued}</td>
        <td>${entry.pangkatChairperson}</td>
        <td>${entry.pangkatMember1}</td>
        <td>${entry.pangkatMember2}</td>
        <td>${entry.status}</td>
        <td>
            <a href="#"><img src="https://www.dropbox.com/scl/fi/u6i83geituweeaybi8y9w/pen.png?rlkey=5f7vjmsrn42d1t0iaxdu3jbjy&st=0sk8r60h&dl=1" alt="Edit" class="edit-icon" onclick="openEditModal('${entry._id}', '${entry.brgyCaseNo}', '${entry.reason}', '${entry.complainantFirstName} ${entry.complainantMiddleName} ${entry.complainantLastName}', '${entry.complaineeFirstName} ${entry.complaineeMiddleName} ${entry.complaineeLastName}', '${entry.dateIssued}', '${entry.pangkatChairperson}', '${entry.pangkatMember1}', '${entry.pangkatMember2}', '${entry.status}')"></a>
            <a href="#"><img src="https://www.dropbox.com/scl/fi/ho6y40rqr930v22ja9219/delete.png?rlkey=b1xjg0s1v3rnrgjx1n5v2usgm&st=xgbxk20f&dl=1" alt="Delete" class="delete-icon" onclick="deleteCFA('${entry._id}')"></a>
            <a href="#"><img src="https://www.dropbox.com/scl/fi/v185qat4whwt769dbbbya/blueDocument.png?rlkey=uy1zoguvwgxd55x7sw6ki8c6h&st=4jg7gfil&dl=1" alt="Generate" class="generate-icon" onclick="generateCFA('${entry._id}')"></a>
            ${entry.status === 'Completed' ? `<a href="#"><img src="https://www.dropbox.com/scl/fi/brbnzjxfdeqjerssseaxc/checked.png?rlkey=yinbka4wjvra6n5dxazi4l13a&st=wpwljnp2&dl=1" alt="Transfer" class="transfer-icon" onclick="transferCFA('${entry._id}')"></a>` : ''}
          </td>
          `;
          tableBody.appendChild(row);
        });
      })
      .catch(error => console.error('Error fetching CFA data:', error));
  }

  // Call the function when the page loads
  window.onload = fetchCFAData;

  // ADDING CFA
  function openAddCFA() {
    document.getElementById("addCFAModal").style.display = "block";

    // Fetch the next Brgy Case No
    fetch('/next-brgy-case-no-cfa')
        .then(response => response.json())
        .then(data => {
            document.getElementById('brgyCaseNo').value = data.nextBrgyCaseNo;
        })
        .catch(error => console.error('Error fetching next Brgy Case No:', error));

    // Fetch dropdown data for Chairperson and Members
    fetchPangkatChairperson();
    fetchPangkatMembers();
}

document.getElementById("addCFAForm").addEventListener("submit", function(event) {
  event.preventDefault();

  const complainantFullName = `${document.getElementById('complainantFirstName').value} ${document.getElementById('complainantMiddleName').value} ${document.getElementById('complainantLastName').value}`;
    const complaineeFullName = `${document.getElementById('complaineeFirstName').value} ${document.getElementById('complaineeMiddleName').value} ${document.getElementById('complaineeLastName').value}`;

    const formData = {
        brgyCaseNo: document.getElementById('brgyCaseNo').value,
        reason: document.getElementById('reason').value,
    complainantFirstName: document.getElementById('complainantFirstName').value,
    complainantMiddleName: document.getElementById('complainantMiddleName').value,
    complainantLastName: document.getElementById('complainantLastName').value,
    complaineeFirstName: document.getElementById('complaineeFirstName').value,
    complaineeMiddleName: document.getElementById('complaineeMiddleName').value,
    complaineeLastName: document.getElementById('complaineeLastName').value,
        dateIssued: document.getElementById('dateIssued').value,
        pangkatChairperson: document.getElementById('pangkatChairperson').value,
        pangkatMember1: document.getElementById('pangkatMember1').value,
        pangkatMember2: document.getElementById('pangkatMember2').value,
        status: document.getElementById('status').value
    };

  fetch('/add-cfa', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(formData),
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      alert('CFA added successfully!');
      closeAddCFAModal();
      fetchCFAData(); // Refresh the table
    } else {
      alert('Error adding CFA');
    }
  })
  .catch((error) => {
    console.error('Error:', error);
  });
});


function closeAddCFAModal() {
  document.getElementById("addCFAModal").style.display = "none";
}

// Close the modal when the user clicks anywhere outside of it
window.onclick = function(event) {
  const modal = document.getElementById("addCFAModal");
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

// EDITING CFA
function openEditModal(id, brgyCaseNo, reason, complainantFullName, complaineeFullName, dateIssued, pangkatChairperson, pangkatMember1, pangkatMember2, status) {
    document.getElementById("editCFAId").value = id;
    document.getElementById("editBrgyCaseNo").value = brgyCaseNo;
    document.getElementById("editReason").value = reason;

    // Set Complainant and Complainee full names
    const complainantNameParts = complainantFullName.split(' ');
    document.getElementById("editComplainantFirstName").value = complainantNameParts[0];
    document.getElementById("editComplainantMiddleName").value = complainantNameParts[1];
    document.getElementById("editComplainantLastName").value = complainantNameParts[2];

    const complaineeNameParts = complaineeFullName.split(' ');
    document.getElementById("editComplaineeFirstName").value = complaineeNameParts[0];
    document.getElementById("editComplaineeMiddleName").value = complaineeNameParts[1];
    document.getElementById("editComplaineeLastName").value = complaineeNameParts[2];

    document.getElementById("editDateIssued").value = dateIssued;
    document.getElementById("editStatus").value = status;

    // Fetch chairperson and members for dropdowns
    Promise.all([
        fetchPangkatChairperson('editPangkatChairperson'),  // Pass the edit dropdown ID
        fetchPangkatMembers('editPangkatMember1', 'editPangkatMember2')  // Pass the edit dropdown IDs for members
    ])
    .then(() => {
        // Set the selected values once the dropdowns are populated
        document.getElementById("editPangkatChairperson").value = pangkatChairperson;
        document.getElementById("editPangkatMember1").value = pangkatMember1;
        document.getElementById("editPangkatMember2").value = pangkatMember2;
    })
    .catch(error => console.error('Error fetching Pangkat Chairperson or Members:', error));

    document.getElementById("editCFAModal").style.display = "block";
}

function closeEditCFAModal() {
  document.getElementById("editCFAModal").style.display = "none";
}

// Close modal when clicking outside of it
window.onclick = function(event) {
  const modal = document.getElementById("editCFAModal");
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

// Submit the edit form
document.getElementById("editCFAForm").addEventListener("submit", function(event) {
  event.preventDefault();

  const complainantFullName = `${document.getElementById('editComplainantFirstName').value} ${document.getElementById('editComplainantMiddleName').value} ${document.getElementById('editComplainantLastName').value}`;
    const complaineeFullName = `${document.getElementById('editComplaineeFirstName').value} ${document.getElementById('editComplaineeMiddleName').value} ${document.getElementById('editComplaineeLastName').value}`;

    const formData = {
        id: document.getElementById("editCFAId").value,
        brgyCaseNo: document.getElementById("editBrgyCaseNo").value,
        reason: document.getElementById("editReason").value,
        complainant: complainantFullName,
        complainee: complaineeFullName,
        dateIssued: document.getElementById("editDateIssued").value,
        pangkatChairperson: document.getElementById("editPangkatChairperson").value,
        pangkatMember1: document.getElementById("editPangkatMember1").value,
        pangkatMember2: document.getElementById("editPangkatMember2").value,
        status: document.getElementById("editStatus").value
    };

  fetch(`/update-cfa/${formData.id}`, {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(formData),
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      alert('CFA updated successfully!');
      closeEditCFAModal();
      fetchCFAData(); // Refresh the table
    } else {
      alert('Error updating CFA');
    }
  })
  .catch((error) => {
    console.error('Error:', error);
  });
});

// DELETING CFA
function deleteCFA(id) {
  if (confirm('Are you sure you want to delete this entry?')) {
    fetch(`/delete-cfa/${id}`, {
      method: 'DELETE',
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        alert('CFA deleted successfully!');
        fetchCFAData(); // Refresh the table after deletion
      } else {
        alert('Error deleting CFA');
      }
    })
    .catch((error) => {
      console.error('Error:', error);
    });
  }
}

// TRANSFER CFA TO COMPLETE
function transferCFA(id) {
  if (confirm('Are you sure you want to transfer this entry to the completed list?')) {
    fetch(`/transfer-cfa/${id}`, {
      method: 'PUT',
    })
    .then(response => response.text())  // Parse as text if it's not JSON
    .then(data => {
      if (data.includes('success')) {  // Adjust check based on your server response
        alert('CFA transferred successfully!');
        window.location.reload(); // Automatically refresh the page
      } else {
        alert('Error transferring CFA');
      }
    })
    .catch((error) => {
      console.error('Error:', error);
    });
  }
}

// Bagong Lagay for Dates (CFA Version)
// Function to set the minimum date to today's date
function setMinDateForCFA() {
    const today = new Date().toISOString().split('T')[0]; 

    // Apply the minimum date to the relevant input fields in the CFA form
    document.getElementById('dateIssued').min = today;  // For Add CFA form
    document.getElementById('editDateIssued').min = today;  // For Edit CFA form
}

// Set the min date whenever the document is ready for CFA forms
document.addEventListener('DOMContentLoaded', setMinDateForCFA);

function generateCFA(id) {
    fetch(`/fetch-cfa-data/${id}`)
    .then(response => response.json())
    .then(data => {
        const params = new URLSearchParams({
            date: data.dateIssued, 
            brgyCaseNo: data.brgyCaseNo,
            complainant: `${data.complainantFirstName} ${data.complainantMiddleName} ${data.complainantLastName}`,
            complainee: `${data.complaineeFirstName} ${data.complaineeMiddleName} ${data.complaineeLastName}`,
            reason: data.reason,
            pangkatChairperson: data.pangkatChairperson,
            pangkatMember1: data.pangkatMember1,
            pangkatMember2: data.pangkatMember2
        });
        window.location.href = `generate-cfa.html?${params.toString()}`;
    })
    .catch(error => console.error('Error fetching CFA data:', error));
}

// Bagong lagay for Pangkat Chairperson and Members
function fetchPangkatChairperson(dropdownId = 'pangkatChairperson') {
    return fetch('/fetch-pangkat-chairperson')
        .then(response => response.json())
        .then(data => {
            const chairpersonDropdown = document.getElementById(dropdownId);
            chairpersonDropdown.innerHTML = '<option value="" disabled selected>Select Pangkat Chairperson</option>'; // Reset dropdown with placeholder
            data.forEach(person => {
                const option = document.createElement('option');
                option.value = `${person.firstName} ${person.middleName} ${person.lastName}`;
                option.textContent = `${person.firstName} ${person.middleName} ${person.lastName}`;
                chairpersonDropdown.appendChild(option);
            });
        })
        .catch(error => console.error('Error fetching Pangkat Chairperson:', error));
}

function fetchPangkatMembers(dropdownId1 = 'pangkatMember1', dropdownId2 = 'pangkatMember2') {
    return fetch('/fetch-pangkat-members')
        .then(response => response.json())
        .then(data => {
            const member1Dropdown = document.getElementById(dropdownId1);
            const member2Dropdown = document.getElementById(dropdownId2);
            member1Dropdown.innerHTML = '<option value="" disabled selected>Select Pangkat Member 1</option>'; // Reset with placeholder
            member2Dropdown.innerHTML = '<option value="" disabled selected>Select Pangkat Member 2</option>'; // Reset with placeholder
            data.forEach(person => {
                const option1 = document.createElement('option');
                const option2 = document.createElement('option');
                option1.value = `${person.firstName} ${person.middleName} ${person.lastName}`;
                option1.textContent = `${person.firstName} ${person.middleName} ${person.lastName}`;
                option2.value = `${person.firstName} ${person.middleName} ${person.lastName}`;
                option2.textContent = `${person.firstName} ${person.middleName} ${person.lastName}`;
                member1Dropdown.appendChild(option1);
                member2Dropdown.appendChild(option2);
            });
        })
        .catch(error => console.error('Error fetching Pangkat Members:', error));
}


        </script>
</body>
</html>
